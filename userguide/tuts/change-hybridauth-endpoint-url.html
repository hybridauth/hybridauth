<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta name="description" content="HybridAuth A PHP Library for authentication through Facebook, Twitter, Google, Yahoo, LinkedIn, AOL, Vimeo, FourSquare, OpenID and other Identity providers">
	<meta name="keywords" content="HybridAuth, open source, web based, single-sign-on, sso, authentify, authentication, authorisation, Facebook, Twitter, Google, Yahoo, LinkedIn, AOL, Vimeo, FourSquare, OpenID">
	<title>HybridAuth - How to change HybridAuth endpoint URL?</title>

	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<link rel="stylesheet" type="text/css" href="../../assets/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="../../assets/css/prettify.css">
	<link rel="stylesheet" type="text/css" href="../../assets/css/css.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
	<script type="text/javascript" src="../../assets/js/prettify.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="../../assets/js/script.js"></script>
</head>
<body>
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container">

			<div class="containter-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="../../index.html">HybridAuth</a>
				</div>
			</div>

			<div class="collapse navbar-collapse" id="navbar-collapse">
				<ul class="nav navbar-nav">
					<li><a href="../../userguide.html">Documentation</a></li>
					<li><a href="../../apidoc.html">API</a></li>
					<li><a href="../../support.html">Help &amp; Support</a></li>
					<li><a href="../../plugins.html" style="color: orange;">Plugins</a></li>
					<li><a href="../../download.html" style="color: gold;">Download</a></li>
				</ul>
				<form action="../../search.html" method="get" class="navbar-form navbar-right" role="search">
					<div class="form-group">
						<input type="text" name="q" placeholder="Search" class="form-control" />
					</div>
				</form>
			</div>

		</div>
	</nav>

	<div id="page" class="container" >

	<ul class="breadcrumb" >
		<li><a href="../../index.html">Home</a></li>
		<li><a href="../../userguide.html">User guide</a></li>
		<li>Tutorials </li>
		<li class="active">How to change HybridAuth Endpoint URL</li>
	</ul>

	<div id="content">
	<div class="page-header">
		<h1>How to change HybridAuth Endpoint URL <small>(HybridAuth internal Callback URL)</small></h1>
	</div>

		<div class="row">
			<div class="col-md-12">

				<p>
					Sometimes it's desirable to change the HybridAuth endpoint URL to something else than what's provided by default.<br />
					For MVC frameworks like CakePHP and CodeIgniter, developers usually drop the <code>hybridauth</code> package inside the <code>public</code> directory.
					This means the callback or return URL for a provider, (ex. Google) look something like this:
				</p>

				<p><span style="color:green">http://mywebsite.com/hybridauth/index.php<strong>?hauth.done=Google</strong></span></p>

				<p>However, it's possible to fully customize the HybridAuth Endpoint URL by rewrapping the endpoint. This means your endpoint URL could look something like (example #1):</p>

				<p><span style="color:green">http://mywebsite.com/app/userscontroller/hybridauth_endpoint/<strong>?hauth.done=Google</strong></span></p>

				<p>For the adventurous, it's even possible to completely change the start and done endpoints to something like this (example #2):</p>

				<p><span style="color:green">http://mywebsite.com/app/userscontroller/hybridauth_endpoint/<strong>done/google</strong></span></p>

				<hr />

				<h3>Example #1</h3>

				<p class="text-justify">
					1. First drop <code>hybridauth</code> package inside the <code>third_party</code> or <code>vendors</code> forder (depending on your frameworks).
				</p>

				<p class="text-justify">
					2. Then create a new method within your users authentication controlller:
				</p>

<pre class="prettyprint linenums">
&lt;?php
	class UsersAuthentication extends Controller {

		function hybridauth_endpoint() {
			 include "/path/to/framework/application/vendors/hybridauth/index.php";
		}

		function signin_with_hybridauth( $provider ) {

			$config = "/path/to/framework/application/vendors/hybridauth/config.php";
			include "/path/to/framework/application/vendors/hybridauth/Hybrid/Auth.php";

			$hybridauth = new Hybrid_Auth( $config );
			$adapter    = $hybridauth-&gt;authenticate( $provider );

			/* etc. */
		}

		function signin() {}

		function signup() {}

		/* ... */
	}
</pre>

				<p>If we assume your website domain is <span style="color:green">http://mywebsite.com/</span> and your application url is <span style="color:green">http://mywebsite.com/<b>app/</b></span> then:</p>
				<p>HybridAuth Endpoint will be (<code>base_url</code> on configuration):<br /><span style="color:green">http://mywebsite.com/app/<b>usersauthentication/hybridauth_endpoint/</b></span></p>
				<p>And you could provide it as callback url for your external applications. ex:<br /><span style="color:green">http://mywebsite.com/app/usersauthentication/hybridauth_endpoint/<b>?hauth.done=Google</b></span></p>

				<hr />

				<h3>Example #2 (advanced)</h3>

				<p>
					You should only use this approach if you really know what you are doing. Normally, you don't want to set custom
					<code>login_start</code> or <code>login_done</code> params when you authenticate. However, this may come handy when you want complete
					transparency of your endpoints, or cannot change the return/callback URL for a provider (when distributing your
					code as a plugin, for example).
				</p>

				<p>
					We'll need to manually adjust the <code>$_REQUEST</code> variable, since this is where HybridAuth looks for the
					<code>hauth_start</code> and <code>hauth_done</code> keys, which it uses to determine if we are starting the auth
					process, or we have been redirected back from the service provider. It also tells HybridAuth which provider we are dealing with.
				</p>

				<p>
					Additionally, we'll need to tell HybridAuth to use custom <code>login_start</code> and <code>login_done</code> params when
					authenticating, so that HybridAuth knows where to redirect the user.
				</p>

<pre class="prettyprint linenums">
&lt;?php
	class UsersAuthentication extends Controller {

		function hybridauth_endpoint( $action, $provider ) {

			include "/path/to/framework/application/vendors/hybridauth/Hybrid/Auth.php";
			include "/path/to/framework/application/vendors/hybridauth/Hybrid/Endpoint.php";

			$key = 'hauth_' . $action; // either `hauth_start` or `hauth_done`

			$_REQUEST[ $key ] = $provider; // provider will be something like `facebook` or `google`

			Hybrid_Endpoint::process();
		}

		function signin_with_hybridauth( $provider ) {

			$config = "/path/to/framework/application/vendors/hybridauth/config.php";
			include "/path/to/framework/application/vendors/hybridauth/Hybrid/Auth.php";

			// you can more than likely get this URL programmatically in your app,
			// we'll set it manually here just for demonstration purposes
			$base_url = 'http://mywebsite.com/app/userscontroller/hybridauth_endpoint';

			$hybridauth = new Hybrid_Auth( $config );

			// we'll need to tell HybridAuth to use custom endpoint URLs
			$adapter    = $hybridauth-&gt;authenticate( $provider, array(
				'login_start' => $base_url . '/start/' . strtolower( $provider ),
				'login_done'  => $base_url . '/done/'  . strtolower( $provider ),
			) );

			/* etc. */
		}

		function signin() {}

		function signup() {}

		/* ... */
	}
</pre>

				<p class="text-justify">If we assume your website domain is <span style="color:green">http://mywebsite.com/</span> and your application url is <span style="color:green">http://mywebsite.com/<b>app/</b></span> then:</p>
				<p>HybridAuth Endpoint will be (<code>base_url</code> on configuration):<br /><span style="color:green">http://mywebsite.com/app/<b>usersauthentication/hybridauth_endpoint/</b></span></p>
				<p>HybridAuth will redirect users logging in via Google to (this will load the <code>Hybrid_Endpoint</code> and start the auth process):<br /><span style="color:green">http://mywebsite.com/app/usersauthentication/hybridauth_endpoint/<b>start/google</b></span></p>
				<p>And you could provide it as callback url for your external applications. ex:<br /><span style="color:green">http://mywebsite.com/app/usersauthentication/hybridauth_endpoint/<b>done/google</b></span></p>

			</div><!-- //.col-md-12 -->
		</div>
	</div>

	<br />

	<div class="disqus">
		<div class="row">
			<div class="col-md-12">
				<div id="disqus_thread"></div>
				<script type="text/javascript">
					/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
						var disqus_shortname = 'hybridauth'; // required: replace example with your forum shortname
						var disqus_identifier = 'change-hybridauth-endpoint-url';
						var disqus_url = 'https://hybridauth.github.io/hybridauth/userguide/tuts/change-hybridauth-endpoint-url.html';

					/* * * DON'T EDIT BELOW THIS LINE * * */
						(function() {
							var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
							dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
							(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
						})();
				</script>
			</div>
		</div>
	</div>

	<!-- Footer -->
	<footer>
		<p>HybridAuth Open Source PHP Social Sign On Library, &copy; 2009-2015.
		<p>Code licensed under dual licence <a href="licenses.html">MIT and GPLv3</a>, documentation under <a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.</p>
		<p>HybridAuth website was made using <a href="http://getbootstrap.com/">Bootstrap</a> and <a href="http://jquery.com/">jQuery</a>. Project hosting provided by <a href="http://github.com/">Github</a>.</p>
	</footer>

</div> <!-- /container -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://sourceforge.net/apps/piwik/hybridauth/" : "http://sourceforge.net/apps/piwik/hybridauth/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
piwik_action_name = '';
piwik_idsite = 1;
piwik_url = pkBaseURL + "piwik.php";
piwik_log(piwik_action_name, piwik_idsite, piwik_url);
</script>
<object><noscript><p><img src="http://sourceforge.net/apps/piwik/hybridauth/piwik.php?idsite=1" alt="piwik"/></p></noscript></object>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-11037160-1");
pageTracker._trackPageview();
} catch(err) {}</script>
<script type="text/javascript"> var sc_project=7312365; var sc_invisible=1; var sc_security="30da00f3"; </script>
<script type="text/javascript" src="http://www.statcounter.com/counter/counter.js"></script>
</body>
</html>
